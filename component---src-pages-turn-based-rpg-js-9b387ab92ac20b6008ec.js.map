{"version":3,"sources":["webpack:///./src/pages/turn-based-rpg.js","webpack:///./.cache/public-page-renderer.js","webpack:///./.cache/gatsby-browser-entry.js","webpack:///./.cache/public-page-renderer-prod.js","webpack:///./src/components/Layout.js","webpack:///./src/components/PageWrapper.js","webpack:///./src/utils/PhaserLoader.js"],"names":["TurnBasedRPGPage","_createGame","BootScene","_Phaser$Scene","call","this","_babel_runtime_helpers_inheritsLoose__WEBPACK_IMPORTED_MODULE_0___default","_proto2","prototype","preload","create","scene","start","Phaser","Scene","WorldScene","_Phaser$Scene2","_proto3","load","image","withPrefix","tilemapTiledJSON","spritesheet","frameWidth","frameHeight","map","make","tilemap","key","tiles","addTilesetImage","obstacles","createStaticLayer","setCollisionByExclusion","player","physics","add","sprite","world","bounds","width","widthInPixels","height","heightInPixels","setCollideWorldBounds","cursors","input","keyboard","createCursorKeys","cameras","main","setBounds","startFollow","roundPixels","anims","frames","generateFrameNumbers","frameRate","repeat","collider","update","time","delta","body","setVelocity","left","isDown","setVelocityX","right","up","setVelocityY","down","play","flipX","stop","config","type","AUTO","parent","zoom","pixelArt","default","arcade","gravity","y","Game","componentDidMount","render","react__WEBPACK_IMPORTED_MODULE_1___default","a","createElement","Wrapper","Title","id","React","Component","styled","div","withConfig","displayName","componentId","h1","PageWrapper","m","module","exports","require","__webpack_require__","r","__webpack_exports__","d","graphql","StaticQueryContext","StaticQuery","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","gatsby_link__WEBPACK_IMPORTED_MODULE_2__","gatsby_link__WEBPACK_IMPORTED_MODULE_2___default","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3__","_public_page_renderer__WEBPACK_IMPORTED_MODULE_3___default","_parse_path__WEBPACK_IMPORTED_MODULE_4__","createContext","props","Consumer","staticQueryData","data","query","children","Error","propTypes","PropTypes","object","string","isRequired","func","ProdPageRenderer","_ref","location","pageResources","loader","getResourcesForPathnameSync","pathname","InternalPageRenderer","Object","assign","json","shape","Layout","react_default","Layout_Wrapper","Comp","_React$Component","apply","arguments","inheritsLoose_default","src_components_Layout","name","window"],"mappings":"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","file":"component---src-pages-turn-based-rpg-js-9b387ab92ac20b6008ec.js","sourcesContent":["import React from 'react'\r\nimport { withPrefix } from 'gatsby'\r\nimport styled from 'styled-components'\r\nimport Phaser from '../utils/PhaserLoader'\r\nimport PageWrapper from '../components/PageWrapper'\r\n\r\nclass TurnBasedRPGPage extends React.Component {\r\n  componentDidMount() {\r\n    this._createGame()\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Wrapper>\r\n        <Title>Turn-Based RPG</Title>\r\n\r\n        <div id=\"game-root\" />\r\n      </Wrapper>\r\n    )\r\n  }\r\n\r\n  _createGame = () => {\r\n    class BootScene extends Phaser.Scene {\r\n      constructor() {\r\n        super('BootScene')\r\n      }\r\n\r\n      preload() {}\r\n\r\n      create() {\r\n        this.scene.start('WorldScene')\r\n      }\r\n    }\r\n\r\n    class WorldScene extends Phaser.Scene {\r\n      constructor() {\r\n        super('WorldScene')\r\n      }\r\n\r\n      preload() {\r\n        this.load.image(\r\n          'tiles',\r\n          withPrefix('/turn-based-rpg/assets/map/spritesheet.png')\r\n        )\r\n        this.load.tilemapTiledJSON(\r\n          'map',\r\n          withPrefix('/turn-based-rpg/assets/map/map.json')\r\n        )\r\n        this.load.spritesheet(\r\n          'player',\r\n          withPrefix('/turn-based-rpg/assets/RPG_assets.png'),\r\n          { frameWidth: 16, frameHeight: 16 }\r\n        )\r\n      }\r\n\r\n      create() {\r\n        const map = this.make.tilemap({ key: 'map' })\r\n        const tiles = map.addTilesetImage('spritesheet', 'tiles')\r\n        const grass = map.createStaticLayer('Grass', tiles, 0, 0)\r\n        const obstacles = map.createStaticLayer('Obstacles', tiles, 0, 0)\r\n        obstacles.setCollisionByExclusion([-1])\r\n\r\n        this.player = this.physics.add.sprite(50, 100, 'player', 6)\r\n        this.physics.world.bounds.width = map.widthInPixels\r\n        this.physics.world.bounds.height = map.heightInPixels\r\n        this.player.setCollideWorldBounds(true)\r\n\r\n        this.cursors = this.input.keyboard.createCursorKeys()\r\n\r\n        this.cameras.main.setBounds(0, 0, map.widthInPixels, map.heightInPixels)\r\n        this.cameras.main.startFollow(this.player)\r\n        this.cameras.main.roundPixels = true // A hack to prevent tiles bleeding â€“ showing border lines on tiles\r\n\r\n        this.anims.create({\r\n          key: 'left',\r\n          frames: this.anims.generateFrameNumbers('player', {\r\n            frames: [1, 7, 1, 13],\r\n          }),\r\n          frameRate: 10,\r\n          repeat: -1,\r\n        })\r\n        this.anims.create({\r\n          key: 'right',\r\n          frames: this.anims.generateFrameNumbers('player', {\r\n            frames: [1, 7, 1, 13],\r\n          }),\r\n          frameRate: 10,\r\n          repeat: -1,\r\n        })\r\n        this.anims.create({\r\n          key: 'up',\r\n          frames: this.anims.generateFrameNumbers('player', {\r\n            frames: [2, 8, 2, 14],\r\n          }),\r\n          frameRate: 10,\r\n          repeat: -1,\r\n        })\r\n        this.anims.create({\r\n          key: 'down',\r\n          frames: this.anims.generateFrameNumbers('player', {\r\n            frames: [0, 6, 0, 12],\r\n          }),\r\n          frameRate: 10,\r\n          repeat: -1,\r\n        })\r\n\r\n        this.physics.add.collider(this.player, obstacles)\r\n      }\r\n\r\n      update(time, delta) {\r\n        this.player.body.setVelocity(0)\r\n\r\n        if (this.cursors.left.isDown) {\r\n          this.player.body.setVelocityX(-80)\r\n        } else if (this.cursors.right.isDown) {\r\n          this.player.body.setVelocityX(80)\r\n        }\r\n\r\n        if (this.cursors.up.isDown) {\r\n          this.player.body.setVelocityY(-80)\r\n        } else if (this.cursors.down.isDown) {\r\n          this.player.body.setVelocityY(80)\r\n        }\r\n\r\n        if (this.cursors.left.isDown) {\r\n          this.player.anims.play('left', true)\r\n          this.player.flipX = true\r\n        } else if (this.cursors.right.isDown) {\r\n          this.player.anims.play('right', true)\r\n          this.player.flipX = false\r\n        } else if (this.cursors.up.isDown) {\r\n          this.player.anims.play('up', true)\r\n        } else if (this.cursors.down.isDown) {\r\n          this.player.anims.play('down', true)\r\n        } else {\r\n          this.player.anims.stop()\r\n        }\r\n      }\r\n    }\r\n\r\n    const config = {\r\n      type: Phaser.AUTO,\r\n      parent: 'game-root',\r\n      width: 320,\r\n      height: 240,\r\n      zoom: 2,\r\n      pixelArt: true,\r\n      physics: {\r\n        default: 'arcade',\r\n        arcade: {\r\n          gravity: { y: 0 },\r\n        },\r\n      },\r\n      scene: [BootScene, WorldScene],\r\n    }\r\n\r\n    const game = new Phaser.Game(config)\r\n  }\r\n}\r\n\r\nconst Wrapper = styled.div`\r\n  min-height: 100vh;\r\n  background: #222;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`\r\n\r\nconst Title = styled.h1`\r\n  padding: 10px 0;\r\n  color: #ccc;\r\n`\r\n\r\nexport default PageWrapper(TurnBasedRPGPage)\r\n","const preferDefault = m => (m && m.default) || m\n\nif (process.env.BUILD_STAGE === `develop`) {\n  module.exports = preferDefault(require(`./public-page-renderer-dev`))\n} else if (process.env.BUILD_STAGE === `build-javascript`) {\n  module.exports = preferDefault(require(`./public-page-renderer-prod`))\n} else {\n  module.exports = () => null\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\nimport Link, {\n  withPrefix,\n  navigate,\n  push,\n  replace,\n  navigateTo,\n} from \"gatsby-link\"\nimport PageRenderer from \"./public-page-renderer\"\nimport parsePath from \"./parse-path\"\n\nconst StaticQueryContext = React.createContext({})\n\nconst StaticQuery = props => (\n  <StaticQueryContext.Consumer>\n    {staticQueryData => {\n      if (\n        props.data ||\n        (staticQueryData[props.query] && staticQueryData[props.query].data)\n      ) {\n        return (props.render || props.children)(\n          props.data ? props.data.data : staticQueryData[props.query].data\n        )\n      } else {\n        return <div>Loading (StaticQuery)</div>\n      }\n    }}\n  </StaticQueryContext.Consumer>\n)\n\nStaticQuery.propTypes = {\n  data: PropTypes.object,\n  query: PropTypes.string.isRequired,\n  render: PropTypes.func,\n  children: PropTypes.func,\n}\n\nfunction graphql() {\n  throw new Error(\n    `It appears like Gatsby is misconfigured. Gatsby related \\`graphql\\` calls ` +\n      `are supposed to only be evaluated at compile time, and then compiled away,. ` +\n      `Unfortunately, something went wrong and the query was left in the compiled code.\\n\\n.` +\n      `Unless your site has a complex or custom babel/Gatsby configuration this is likely a bug in Gatsby.`\n  )\n}\n\nexport {\n  Link,\n  withPrefix,\n  graphql,\n  parsePath,\n  navigate,\n  push, // TODO replace for v3\n  replace, // TODO remove replace for v3\n  navigateTo, // TODO: remove navigateTo for v3\n  StaticQueryContext,\n  StaticQuery,\n  PageRenderer,\n}\n","import React from \"react\"\nimport PropTypes from \"prop-types\"\n\nimport InternalPageRenderer from \"./page-renderer\"\nimport loader from \"./loader\"\n\nconst ProdPageRenderer = ({ location }) => {\n  const pageResources = loader.getResourcesForPathnameSync(location.pathname)\n  return React.createElement(InternalPageRenderer, {\n    location,\n    pageResources,\n    ...pageResources.json,\n  })\n}\n\nProdPageRenderer.propTypes = {\n  location: PropTypes.shape({\n    pathname: PropTypes.string.isRequired,\n  }).isRequired,\n}\n\nexport default ProdPageRenderer\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport './Layout.css'\r\n\r\nclass Layout extends React.Component {\r\n  render() {\r\n    let { children } = this.props\r\n\r\n    return <Wrapper>{children}</Wrapper>\r\n  }\r\n}\r\n\r\nconst Wrapper = styled.div``\r\n\r\nexport default Layout\r\n","import React from 'react'\r\nimport Layout from './Layout'\r\n\r\nconst PageWrapper = Comp => {\r\n  class Wrapper extends React.Component {\r\n    render() {\r\n      return (\r\n        <Layout {...this.props}>\r\n          <Comp {...this.props} />\r\n        </Layout>\r\n      )\r\n    }\r\n  }\r\n\r\n  Wrapper.displayName = `Wrapper-of-${Comp.displayName || Comp.name}`\r\n\r\n  return Wrapper\r\n}\r\n\r\nexport default PageWrapper\r\n","let Phaser\r\nif (typeof window !== 'undefined') {\r\n  Phaser = require('phaser')\r\n}\r\n\r\nexport default Phaser\r\n"],"sourceRoot":""}